!function(r){"use strict";function e(){n.handleDependency()}var p=wp.customize,n={controls:{},init:function(){var i=this;i.handleDependency(),i.hideEmptySections(),p.state("astra-customizer-tab").bind(e),p.bind("change",function(e,n){i.hasDependentControls(e.id)&&(i.handleDependency(),i.hideEmptySections())})},hasDependentControls:function(a){var s=!1;return r.each(astra.config,function(e,n){if(_.isUndefined(n.conditions)){var i=n[0];if(a==i)return void(s=!0)}else{var t=n.conditions;r.each(t,function(e,n){var i=n[0];a!=i||(s=!0)})}}),s},handleDependency:function(){var t=this,e=p.get();t.checked_controls={},_.each(e,function(e,n){var i=p.control(n);t.checkControlVisibility(i,n)})},checkControlVisibility:function(e,n){var i=p.get();if(!_.isUndefined(e)&&void 0!==astra.config[n]){var t=!1,a=!0,s=astra.config[n],o=_.isUndefined(s.conditions)?s:s.conditions,r=_.isUndefined(s.operator)?"AND":s.operator;void 0!==o&&(t=this.checkDependency(o,i,r),a=this.checkContext(n),this.checked_controls[n]=t&&a,t&&a?e.container.removeClass("ast-hide"):e.container.addClass("ast-hide"))}},checkContext:function(e){if("undefined"!=typeof AstraBuilderCustomizerData){var n=AstraBuilderCustomizerData.contexts[e];if(void 0!==n){for(var i=p.state("astra-customizer-tab").get(),t=0;t<n.length;t++)return"ast_selected_tab"===n[t].setting&&n[t].value===i;return!0}}return!0},checkDependency:function(e,d,f){var l=this,u=!0,h=!1,n=e[0];if(_.isString(n)){var i,t=e[1],a=e[2];if(!_.isUndefined(astra.config[n])){e=_.isUndefined(astra.config[n].conditions)?astra.config[n]:astra.config[n].conditions;var s=_.isUndefined(astra.config[n].operator)?"AND":astra.config[n].operator;if(!_.isUndefined(e))if(l.checkDependency(e,d,s)){var o=p.control(n);void 0!==o&&o.container.removeClass("ast-hide")}else if(u=!(h=!0),"AND"==f)return}_.isUndefined(d[n])||h||!u||(i=d[n],u=l.compareValues(i,t,a))}else _.isArray(n)&&(r.each(e,function(e,n){var i=n[0],t=n[1],a=n[2],s=_.isUndefined(d[i])?"":d[i];if(void 0!==astra.config[i]){var o=_.isUndefined(astra.config[i].conditions)?astra.config[i]:astra.config[i].conditions,r=_.isUndefined(astra.config[i].operator)?"AND":astra.config[i].operator;if(!_.isUndefined(o))if(l.checkDependency(o,d,r)){u=!0;var c=p.control(i);c&&c.container.removeClass("ast-hide")}else if(u=!1,"AND"==f)return}else u=!0;if(u)if("AND"==f){if(!l.compareValues(s,t,a))return u=!1}else u=!!l.compareValues(s,t,a)&&(h=!0)}),h&&"OR"==f&&(u=!0));return u},hideEmptySections:function(){r("ul.accordion-section.control-section-ast_section").each(function(){var e=r(this).attr("id"),n=!1,i=r(this).find(" > .customize-control");0<i.length&&(i.each(function(){r(this).hasClass("ast-hide")||"none"==r(this).css("display")||(n=!0)}),n?r('.control-section[aria-owns="'+e+'"]').removeClass("ast-hide"):r('.control-section[aria-owns="'+e+'"]').addClass("ast-hide"))})},compareValues:function(e,n,i){var t=!1;switch(n){case"===":t=e===i;break;case">":t=i<e;break;case"<":t=e<i;break;case"<=":t=e<=i;break;case">=":t=i<=e;break;case"!=":t=e!=i;break;case"empty":var a=_.clone(e);t=_.isObject(a)||_.isArray(a)?(_.each(a,function(e,n){_.isEmpty(e)&&delete a[n]}),!!_.isEmpty(a)):!(!_.isNull(a)&&""!=a);break;case"not_empty":a=_.clone(e);(_.isObject(a)||_.isArray(a))&&_.each(a,function(e,n){_.isEmpty(e)&&delete a[n]}),t=!_.isEmpty(a);break;case"contains":_.isArray(e)&&-1!==r.inArray(i,e)&&(t=!0);break;default:t=_.isArray(i)?!_.isEmpty(i)&&!_.isEmpty(e)&&_.contains(i,e):e==i}return t}};r(function(){window.addEventListener("load",function(){n.init()})})}(jQuery);